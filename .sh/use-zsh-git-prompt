# TODO - Make zsh-git-prompt a plain old ... repo. (move it from ~/)
if [[ -e ~/.zsh-git-prompt ]]; then
    source ~/.zsh-git-prompt
    ## Override the cache invalidator for our additional commands.
    function preexec_update_git_vars() {
        local expected_dotsdir=~/.../src/git-dots
        if [[ -d $expected_dotsdir/bin ]]; then
            echo 'How am I here?'
            local recache=`(echo git; ls $expected_dotsdir) | sed s/\\n/|/g`
            echo $recache
            case "$2" in
                $recache)
                __EXECUTED_GIT_COMMAND=1
                ;;
            esac
        else
            [[ $PREEXEC_HUSHUP != 1 ]] &&
                echo "No bin/ dir in $expected_dotsdir; Odd."
            export PREEXEC_HUSHUP=1
        fi
    }
    PROMPT='$(git_super_status)%# '
    RPROMPT='%B%m%~%b'
else
    echo "https://github.com/olivierverdier/zsh-git-prompt needed."
fi
